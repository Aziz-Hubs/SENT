// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: create_ticket.sql

package pilotdb

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createTicket = `-- name: CreateTicket :one
INSERT INTO
    tickets (
        tenant_id,
        subject,
        description,
        status,
        priority,
        requester_id,
        deep_link,
        execution_plan
    )
VALUES (
        $1,
        $2,
        $3,
        'new',
        'P2',
        $4,
        $5,
        $6
    )
RETURNING
    id
`

type CreateTicketParams struct {
	TenantID      int32       `json:"tenant_id"`
	Subject       string      `json:"subject"`
	Description   pgtype.Text `json:"description"`
	RequesterID   pgtype.Int4 `json:"requester_id"`
	DeepLink      pgtype.Text `json:"deep_link"`
	ExecutionPlan []byte      `json:"execution_plan"`
}

func (q *Queries) CreateTicket(ctx context.Context, arg CreateTicketParams) (int32, error) {
	row := q.db.QueryRow(ctx, createTicket,
		arg.TenantID,
		arg.Subject,
		arg.Description,
		arg.RequesterID,
		arg.DeepLink,
		arg.ExecutionPlan,
	)
	var id int32
	err := row.Scan(&id)
	return id, err
}
